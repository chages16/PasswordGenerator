<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>
<body>
    <h2>Password Generator</h2>
    <button type="button" class="btn btn-secondary btn-sm" onclick="passwordgen()">Password Generator</button>
    <br>
    <p id="outputpw"></p>

    <script>
        function passwordgen() {
            String.prototype.replaceAt = function(index, replacement) {
            return this.substr(0, index) + replacement + this.substr(index + replacement.length);
            }

            alert("Time to choose a password");
            var charlength = prompt("How many characters do you want the password to be (select number only between 8 and 128)");
           
            if(charlength >7 && charlength< 121) {
            var charlength = Math.floor(charlength);
            alert("Your password will be " + charlength + " characters long");
        }
            else {
            alert("you have input incorrectly- try again");
            return;
        }
               
            var confirmphrase = confirm("Would you like to use a pre-defined phrase, word or number pattern within your password?");
            if (confirmphrase) {
                alert ("Phrase must be less then half the total character length!!!");
            var passwordphrase = prompt("Type phrase here");
                if (passwordphrase.length > charlength/2) {
                alert ("Phrase is too long, try again");
                var passwordphrase = "";
                return;
            }
                else {
                    alert("Your Password phrase is " + passwordphrase);
                    console.log("Passwordphrase: " + passwordphrase);
                }
            }
            else {
          var passwordphrase = "";
          alert ("No worries");
          console.log("Passwordphrase: " + passwordphrase);
      }
            var confirmnumber= confirm("Do you want additional numbers?");
            var confirmletters= confirm("Do you want additional Capital Letters?");
            var confirmsymbols= confirm ("Do you want additional special characters?");
             
        

            var passwordcomplete = "";
            var letters=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
            console.log(letters[(Math.floor(Math.random()*24))].charAt(0));
            console.log(passwordcomplete.charAt(0));
            var numbers= ["0","1","2","3","4","5","6","7","8","9"];
            var symbols= ["!","@","#","%","&","(","$",")","{","}","?","<",">"]
            var capitals= ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]


                for (var ia = 0; ia < charlength; ia++) {
                passwordcomplete += letters[(Math.floor(Math.random()*letters.length))].charAt(0);
                console.log(passwordcomplete);
                }
                alert("Initialising new password!")

                
                // capitalsyes?
                if(confirmletters==true) {
                for (var icap = 0; icap < charlength; icap++) {
                var numberstest = Math.floor((Math.random())*6);
                console.log(numberstest);
                if (numberstest > 2) {
                var passwordcomplete2 = passwordcomplete.replaceAt(icap, capitals[(Math.floor(Math.random()*capitals.length))]);
                console.log(passwordcomplete2);
                var passwordcomplete = passwordcomplete2;

              }
                else {
                console.log(passwordcomplete2);
                }
                }
                }

                if (confirmnumber==true) {
                for (var ib = 0; ib < charlength; ib++) {
                var numberstest = Math.floor((Math.random())*5);
                console.log(numberstest);
                if (numberstest > 2) {
                var passwordcomplete2 = passwordcomplete.replaceAt(ib, numbers[(Math.floor(Math.random()*numbers.length))]);
                console.log(passwordcomplete2);
                var passwordcomplete = passwordcomplete2;

              }
                else {
                console.log(passwordcomplete2);
                }
                }
                }

                 // symbols yes?
                 
                if (confirmsymbols==true) {
                for (var ic = 0; ic < charlength; ic++) {
                var numberstest2 = Math.floor((Math.random())*5);
                console.log(numberstest2);
                if (numberstest2 > 2) {
                var passwordcomplete2 = passwordcomplete.replaceAt(ic, symbols[(Math.floor(Math.random()*symbols.length))]);
                console.log(passwordcomplete2);
                var passwordcomplete = passwordcomplete2;

              }
                else {
                console.log(passwordcomplete2);
                }
                }
                }
          
                alert("Done...");

            if(passwordphrase.length > -1) {
            var passwordcomplete2 = (passwordcomplete.replaceAt(Math.floor(Math.random()*(passwordcomplete.length-passwordphrase.length)), passwordphrase));
            var passwordcomplete = passwordcomplete2;
        }
            passwordcomplete = passwordcomplete.replace(" ", "-");
            alert("Final password is " + passwordcomplete);
            console.log (passwordcomplete);
            document.write("Your password is....  " + passwordcomplete);
        }
        
    </script>

</body>
</html>